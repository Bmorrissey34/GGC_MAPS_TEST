(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4723:function(e,t,r){Promise.resolve().then(r.bind(r,1160))},1160:function(e,t,r){"use strict";r.d(t,{default:function(){return p}});var l=r(7437),i=r(2265),n=r(9376),a=r(4577),s=r(7683),o=r(8073);function u(e){let{src:t,className:r="",interactiveSelector:n=".building-group, .building, .room-group",selectedId:u=null,onSelect:c,onReady:d}=e,f=(0,i.useRef)(null),[g,h]=(0,i.useState)(null),[m,p]=(0,i.useState)(null),[v,b]=(0,s.i)(f.current,g),E=(0,i.useRef)(new Map);return((0,i.useEffect)(()=>{u&&b(u)},[u,b]),(0,i.useEffect)(()=>{let e=!0;return h(null),p(null),fetch((0,o.up)(t),{cache:"no-store"}).then(e=>{if(!e.ok)throw Error("HTTP ".concat(e.status));return e.text()}).then(t=>{e&&h((0,a.S0)(t))}).catch(t=>{e&&p(t.message)}),()=>{e=!1}},[t]),(0,i.useEffect)(()=>{if(!g||!f.current)return;let e=f.current,r=e=>{let t=e.target.closest(n);if(t){let e=t.closest(".building-group")||t.closest(".room-group")||t,r=e.id||t.id?(e.id||t.id).toLowerCase():null;null==c||c(r,t)}},l=e=>{let t=e.target.closest(n);if(t&&("Enter"===e.key||" "===e.key)){e.preventDefault();let r=t.closest(".building-group")||t.closest(".room-group")||t,l=r.id||t.id?(r.id||t.id).toLowerCase():null;null==c||c(l,t)}};return e.querySelectorAll(n).forEach(e=>{if(e.hasAttribute("tabindex")||e.setAttribute("tabindex","0"),e.hasAttribute("role")||e.setAttribute("role","button"),!e.hasAttribute("aria-label")){let t=e.querySelector("text");e.setAttribute("aria-label",t&&t.textContent.trim()||e.id||"map element")}}),e.addEventListener("click",r),e.addEventListener("keydown",l),d&&d(Array.from(e.querySelectorAll(n)).filter(e=>e.id&&String(e.id).trim().length>0).map(e=>{var r,l;let i=(null===(l=e.querySelector("text"))||void 0===l?void 0:null===(r=l.textContent)||void 0===r?void 0:r.trim())||"";return{id:e.id,kind:(0,a.zN)(e),name:i,svg:t}})),()=>{e.removeEventListener("click",r),e.removeEventListener("keydown",l)}},[g,n,c,d,t]),(0,i.useEffect)(()=>{let e=e=>null==e?"":(0,a.Gn)(e),t=e=>{let t=E.current.get(e);t&&(t.forEach(e=>e.classList.remove("hover-highlight")),E.current.delete(e))},r=()=>{E.current.forEach(e=>e.forEach(e=>e.classList.remove("hover-highlight"))),E.current.clear()},l=t=>{let{selector:r,ids:l}=t,i=f.current;if(!i)return[];let n=new Set;return r&&i.querySelectorAll(r).forEach(e=>{n.add(e.closest(".building-group")||e)}),Array.isArray(l)&&l.forEach(t=>{if(!t)return;let r=e(t);if(!r)return;let l=i.querySelector("#".concat(r));l&&n.add(l.closest(".building-group")||l)}),Array.from(n).filter(Boolean)},i=e=>{let r=e.detail||{},{source:i}=r;if(!i)return;t(i);let n=l(r);n.length&&(n.forEach(e=>e.classList.add("hover-highlight")),E.current.set(i,n))},n=e=>{let{source:l}=e.detail||{};l?t(l):r()};return window.addEventListener("ggcmap-hover",i),window.addEventListener("ggcmap-hover-clear",n),()=>{window.removeEventListener("ggcmap-hover",i),window.removeEventListener("ggcmap-hover-clear",n),r()}},[]),(0,i.useEffect)(()=>{E.current.forEach(e=>e.forEach(e=>e.classList.remove("hover-highlight"))),E.current.clear()},[g]),m)?(console.error("Error loading SVG:",m),(0,l.jsxs)("div",{className:"svg-error",children:["Error loading SVG: ",m]})):(0,l.jsx)("div",{ref:f,className:"inline-svg ".concat(r),dangerouslySetInnerHTML:{__html:g},style:{isolation:"isolate"}})}var c=r(7244),d=r(3873),f=r(7653),g=r(6073),h=r(4695);function m(e){let{src:t="/BuildingMaps/(Campus)/Campus.svg",interactiveSelector:r=".building-group, .building"}=e,[a,s]=(0,i.useState)(null),m=(0,n.useRouter)(),[p,v]=(0,i.useState)(""),{locale:b}=(0,g.Z)(),E=(0,h.u0)(b),S=(0,i.useMemo)(()=>new Set(f.map(e=>String(e.id).toUpperCase())),[]),y=(0,i.useCallback)(()=>{let e=document.querySelector(".map-wrap svg");e&&["[id='1000']","[id='2000']","[id='3000']","#BUILDING_1000","#BUILDING_2000","#BUILDING_3000","[id='b1000']","[id='2']","[id='3']"].forEach(t=>{e.querySelectorAll(t).forEach(e=>{e.classList.add("student-housing"),e.classList.contains("building-group")&&e.querySelectorAll(".building").forEach(e=>{e.classList.add("student-housing")})})})},[]);(0,i.useEffect)(()=>{y()},[y,t]);let w=(0,i.useRef)(null),L=(0,i.useCallback)(()=>{y();let e=document.querySelector(".map-wrap"),t=null==e?void 0:e.querySelector("svg");if(!t)return;t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("data-map-anchor",""),t.querySelectorAll("[data-map-anchor]").forEach(e=>{e!==t&&e.removeAttribute("data-map-anchor")});let r=t.querySelector("g#campus, g#Campus")||t.querySelector("svg > g");if(r&&r.removeAttribute("transform"),w.current&&"function"==typeof w.current.fitToElement)try{w.current.fitToElement(t,{padding:0,scaleMultiplier:.15})}catch(e){}if(w.current&&"function"==typeof w.current.centerOn)try{let e=t.getBBox(),r=e.x+e.width/2,l=e.y+e.height/2;w.current.centerOn(r,l)}catch(e){}},[y]);return(0,l.jsxs)("div",{className:"map-wrap",children:[(0,l.jsx)(c.Z,{ref:w,initialScale:1,minScale:.1,maxScale:6,className:"map-viewport",disableDoubleClickZoom:!0,autoFit:!1,fitPadding:0,fitScaleMultiplier:.7,resetLabel:E.overlay.resetLabel,resetAriaLabel:E.overlay.resetAria,children:(0,l.jsx)(u,{src:t,className:"w-100 h-100",interactiveSelector:r,selectedId:a,onSelect:e=>{if(!e)return;s(e);let t=String(e).toUpperCase();if(o.w5.includes(t)){v(E.campusMapView.restrictionMessage);return}S.has(t)&&m.push("/building/".concat(t))},onReady:L})}),(0,l.jsx)(d.Z,{}),p&&(0,l.jsx)("div",{className:"campus-popup-error",children:(0,l.jsxs)("div",{className:"campus-popup-error-inner",children:[(0,l.jsx)("div",{className:"mb-3",children:p}),(0,l.jsx)("button",{className:"link-panel-button",onClick:()=>v(""),children:E.general.ok})]})})]})}function p(){return(0,l.jsx)("main",{role:"main",className:"campus-viewer",children:(0,l.jsx)(m,{src:"/BuildingMaps/(Campus)/Campus.svg"})})}}},function(e){e.O(0,[648,925,971,117,744],function(){return e(e.s=4723)}),_N_E=e.O()}]);