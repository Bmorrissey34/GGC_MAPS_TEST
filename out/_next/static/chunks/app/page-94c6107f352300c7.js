(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{7684:function(e,t,r){Promise.resolve().then(r.bind(r,1160))},1160:function(e,t,r){"use strict";r.d(t,{default:function(){return p}});var l=r(7437),n=r(2265),i=r(9376),a=r(4577),s=r(7683);function c(e){let{src:t,className:r="",interactiveSelector:i=".building-group, .building, .room-group",selectedId:c=null,onSelect:u,onReady:o}=e,d=(0,n.useRef)(null),[h,f]=(0,n.useState)(null),[m,g]=(0,n.useState)(null),[p,v]=(0,s.i)(d.current,h),b=(0,n.useRef)(new Map);return((0,n.useEffect)(()=>{c&&v(c)},[c,v]),(0,n.useEffect)(()=>{let e=!0;return f(null),g(null),fetch(t,{cache:"no-store"}).then(e=>{if(!e.ok)throw Error("HTTP ".concat(e.status));return e.text()}).then(t=>{e&&f((0,a.S0)(t))}).catch(t=>{e&&g(t.message)}),()=>{e=!1}},[t]),(0,n.useEffect)(()=>{if(!h||!d.current)return;let e=d.current,r=e=>{let t=e.target.closest(i);if(t){let e=t.id?t.id.toLowerCase():null;null==u||u(e,t)}},l=e=>{let t=e.target.closest(i);t&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),null==u||u(t.id||null,t))};return e.querySelectorAll(i).forEach(e=>{if(e.hasAttribute("tabindex")||e.setAttribute("tabindex","0"),e.hasAttribute("role")||e.setAttribute("role","button"),!e.hasAttribute("aria-label")){let t=e.querySelector("text");e.setAttribute("aria-label",t&&t.textContent.trim()||e.id||"map element")}}),e.addEventListener("click",r),e.addEventListener("keydown",l),o&&o(Array.from(e.querySelectorAll(i)).filter(e=>e.id&&String(e.id).trim().length>0).map(e=>{var r,l;let n=(null===(l=e.querySelector("text"))||void 0===l?void 0:null===(r=l.textContent)||void 0===r?void 0:r.trim())||"";return{id:e.id,kind:(0,a.zN)(e),name:n,svg:t}})),()=>{e.removeEventListener("click",r),e.removeEventListener("keydown",l)}},[h,i,u,o,t]),(0,n.useEffect)(()=>{let e=e=>null==e?"":(0,a.Gn)(e),t=e=>{let t=b.current.get(e);t&&(t.forEach(e=>e.classList.remove("hover-highlight")),b.current.delete(e))},r=()=>{b.current.forEach(e=>e.forEach(e=>e.classList.remove("hover-highlight"))),b.current.clear()},l=t=>{let{selector:r,ids:l}=t,n=d.current;if(!n)return[];let i=new Set;return r&&n.querySelectorAll(r).forEach(e=>{i.add(e.closest(".building-group")||e)}),Array.isArray(l)&&l.forEach(t=>{if(!t)return;let r=e(t);if(!r)return;let l=n.querySelector("#".concat(r));l&&i.add(l.closest(".building-group")||l)}),Array.from(i).filter(Boolean)},n=e=>{let r=e.detail||{},{source:n}=r;if(!n)return;t(n);let i=l(r);i.length&&(i.forEach(e=>e.classList.add("hover-highlight")),b.current.set(n,i))},i=e=>{let{source:l}=e.detail||{};l?t(l):r()};return window.addEventListener("ggcmap-hover",n),window.addEventListener("ggcmap-hover-clear",i),()=>{window.removeEventListener("ggcmap-hover",n),window.removeEventListener("ggcmap-hover-clear",i),r()}},[]),(0,n.useEffect)(()=>{b.current.forEach(e=>e.forEach(e=>e.classList.remove("hover-highlight"))),b.current.clear()},[h]),m)?(console.error("Error loading SVG:",m),(0,l.jsxs)("div",{className:"svg-error",children:["Error loading SVG: ",m]})):(0,l.jsx)("div",{ref:d,className:"inline-svg ".concat(r),dangerouslySetInnerHTML:{__html:h},style:{isolation:"isolate"}})}var u=r(7244),o=r(3873),d=r(7653),h=r(8073),f=r(6073),m=r(4695);function g(e){let{src:t="/BuildingMaps/(Campus)/Campus.svg",interactiveSelector:r=".building-group, .building"}=e,[s,g]=(0,n.useState)(null),p=(0,i.useRouter)(),[v,b]=(0,n.useState)(""),{locale:E}=(0,f.Z)(),S=(0,m.u0)(E),y=(0,n.useMemo)(()=>new Set(d.map(e=>String(e.id).toUpperCase())),[]),w=(0,n.useCallback)(()=>{let e=document.querySelector(".map-wrap svg");e&&["[id='1000']","[id='2000']","[id='3000']","#BUILDING_1000","#BUILDING_2000","#BUILDING_3000","[id='b1000']","[id='2']","[id='3']"].forEach(t=>{e.querySelectorAll(t).forEach(e=>{e.classList.add("student-housing"),e.classList.contains("building-group")&&e.querySelectorAll(".building").forEach(e=>{e.classList.add("student-housing")})})})},[]);(0,n.useEffect)(()=>{w()},[w,t]);let x=(0,n.useRef)(null),L=(0,n.useCallback)(()=>{w();let e=document.querySelector(".map-wrap"),t=null==e?void 0:e.querySelector("svg");if(!t)return;(0,a.VY)(t),t.setAttribute("data-map-anchor",""),t.querySelectorAll("[data-map-anchor]").forEach(e=>{e!==t&&e.removeAttribute("data-map-anchor")});let r=t.querySelector("g#campus, g#Campus")||t.querySelector("svg > g");if(r&&r.removeAttribute("transform"),x.current&&"function"==typeof x.current.fitToElement)try{x.current.fitToElement(t,{padding:0,scaleMultiplier:.15})}catch(e){}if(x.current&&"function"==typeof x.current.centerOn)try{let e=t.getBBox(),r=e.x+e.width/2,l=e.y+e.height/2;x.current.centerOn(r,l)}catch(e){}},[w]);return(0,l.jsxs)("div",{className:"map-wrap",children:[(0,l.jsx)(u.Z,{ref:x,initialScale:1,minScale:.1,maxScale:6,className:"map-viewport",disableDoubleClickZoom:!0,autoFit:!1,fitPadding:0,fitScaleMultiplier:.7,resetLabel:S.overlay.resetLabel,resetAriaLabel:S.overlay.resetAria,children:(0,l.jsx)(c,{src:t,className:"w-100 h-100",interactiveSelector:r,selectedId:s,onSelect:e=>{if(!e)return;g(e);let t=String(e).toUpperCase();if(h.w5.includes(t)){b(S.campusMapView.restrictionMessage);return}y.has(t)&&p.push("/building/".concat(t))},onReady:L})}),(0,l.jsx)(o.Z,{}),s&&(0,l.jsxs)("div",{className:"map-selection-indicator",children:[S.general.selectedPrefix,": ",(0,l.jsx)("strong",{children:s})]}),v&&(0,l.jsx)("div",{className:"campus-popup-error",children:(0,l.jsxs)("div",{className:"campus-popup-error-inner",children:[(0,l.jsx)("div",{className:"mb-3",children:v}),(0,l.jsx)("button",{className:"link-panel-button",onClick:()=>b(""),children:S.general.ok})]})})]})}function p(){return(0,l.jsx)("main",{role:"main",className:"campus-viewer",children:(0,l.jsx)(g,{src:"/BuildingMaps/(Campus)/Campus.svg"})})}}},function(e){e.O(0,[648,925,971,117,744],function(){return e(e.s=7684)}),_N_E=e.O()}]);